{"version":3,"sources":["webpack:///./src/views/Request.vue","webpack:///./src/views/Request.vue?a27a"],"names":["class","for","value","isLoading","req","data","back","title","fio","phone","currency","amount","type","status","id","remove","hasChanges","update","setup","route","router","store","params","undefined","dispatch","push","go","components","AppPage","AppLoader","AppStatus","render"],"mappings":"0JASe,Y,GAENA,MAAM,gB,EACT,eAAkD,SAA3CC,IAAI,UAAS,0BAAsB,G,EAExC,eAAsC,UAA9BC,MAAM,QAAO,YAAQ,G,EAC7B,eAA0C,UAAlCA,MAAM,aAAY,WAAO,G,EACjC,eAAuC,UAA/BA,MAAM,UAAS,WAAO,G,EAC9B,eAA4C,UAApCA,MAAM,WAAU,eAAW,G,SAO9BF,MAAM,0B,8HAvBC,EAAAG,W,iBAAlB,eAA+B,YACS,EAAAC,IAAIC,M,iBAA5C,eAqBW,G,MArBDC,KAAA,GAAKC,MAAM,S,yBAInB,iBAAuD,CAAvD,eAAuD,UAApD,eAAgD,cAAxC,gBAAa,eAAG,EAAAH,IAAIC,KAAKG,KAAG,KACvC,eAAqD,UAAlD,eAA8C,cAAtC,YAAS,eAAG,EAAAJ,IAAIC,KAAKI,OAAK,KACrC,eAA8D,UAA3D,eAAuD,cAA/C,UAAO,eAAG,EAAAC,SAAS,EAAAN,IAAIC,KAAKM,SAAM,KAC7C,eAAsE,UAAnE,eAA+D,e,EAA/C,eAAqC,GAAxBC,KAAM,EAAAR,IAAIC,KAAKQ,Q,qBAE/C,eAQM,MARN,EAQM,CAPJ,E,eACA,eAKS,UALDC,GAAG,S,qDAAkB,EAAAD,OAAM,K,CACjC,EACA,EACA,EACA,G,cAJ2B,EAAAA,YAQ/B,eAA2D,UAAnDb,MAAM,aAAc,QAAK,8BAAE,EAAAe,QAAA,EAAAA,OAAA,sBAAQ,WAChB,EAAAC,Y,iBAA3B,eAAwE,U,MAAhEhB,MAAM,OAA0B,QAAK,8BAAE,EAAAiB,QAAA,EAAAA,OAAA,sBAAQ,a,mDAEzD,eAA8E,KAA9E,EAA0C,eAAY,eAAG,EAAAH,IAAK,cAAW,I,gHAa5D,GACbI,MADa,WAEX,IAAMC,EAAQ,iBACRC,EAAS,iBACTC,EAAQ,iBACRlB,EAAY,gBAAI,GAChBC,EAAM,eAAI,IACVU,EAAKK,EAAMG,OAAOR,GAClBD,EAAS,oBAAIU,GACbP,EAAa,gBAAS,kBAAKZ,EAAIF,MAAMG,KAAKQ,SAAWA,EAAOX,SAE5Da,EAAK,yDAAI,8GACPM,EAAMG,SAAS,qBAAsBL,EAAMG,OAAOR,IAD3C,OAEbM,EAAOK,KAAK,KAFC,2CAAJ,qDAKLR,EAAK,yDAAI,2GACPZ,EADO,iCACID,EAAIF,MAAMG,MADd,IACmBQ,OAAQA,EAAOX,MAAOY,GAAIK,EAAMG,OAAOR,KAD1D,SAEPO,EAAMG,SAAS,qBAAsBnB,GAF9B,OAGbe,EAAOM,KAHM,2CAAJ,qDAYX,OANA,eAAS,wCAAC,2GACRvB,EAAUD,OAAQ,EADV,SAEUmB,EAAMG,SAAS,mBAAoBV,GAF7C,OAERV,EAAIF,MAFI,OAGRW,EAAOX,MAAP,UAAeE,EAAIF,MAAMG,YAAzB,aAAe,EAAgBQ,OAC/BV,EAAUD,OAAQ,EAJV,4CAMH,CAAEC,YAAWC,MAAKU,KAAIJ,WAAA,KAAUK,SAAQE,SAAQJ,SAAQG,eAEjEW,WAAY,CACV,WAAYC,EAAA,KACZ,aAAcC,EAAA,KACd,aAAcC,EAAA,OCnElB,EAAOC,OAASA,EAED","file":"js/chunk-2d0a4783.ecba7052.js","sourcesContent":["<template>\r\n  <app-loader v-if=\"isLoading\" />\r\n  <app-page back title=\"Зявка\" v-else-if=\"req.data\">\r\n    <!-- <template #header>\r\n      <h3> ID: {{ id }}</h3>\r\n    </template> -->\r\n    <p><strong>Имя клиента: {{ req.data.fio }}</strong></p>\r\n    <p><strong>Телефон: {{ req.data.phone }}</strong></p>\r\n    <p><strong>Сумма: {{ currency(req.data.amount) }}</strong></p>\r\n    <p><strong>Статус: <app-status :type=\"req.data.status\"/> </strong></p>\r\n\r\n    <div class=\"form-control\">\r\n      <label for=\"status\">Обновить статус заявки</label>\r\n      <select id=\"status\" v-model=\"status\">\r\n        <option value=\"done\">Завершен</option>\r\n        <option value=\"cancelled\">Отменен</option>\r\n        <option value=\"active\">Активен</option>\r\n        <option value=\"pending\">Выполняется</option>\r\n      </select>\r\n    </div>\r\n\r\n    <button class=\"btn danger\" @click=\"remove\">Удалить</button>\r\n    <button class=\"btn \" v-if=\"hasChanges\" @click=\"update\">Обновить</button>\r\n  </app-page>\r\n  <h3 v-else class=\"text-center text-white\">Заявка с ID:{{ id }} не найдено</h3>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport AppPage from \"@/components/ui/AppPage.vue\";\r\nimport AppLoader from \"@/components/ui/AppLoader.vue\";\r\nimport AppStatus from \"@/components/ui/AppStatus.vue\";\r\nimport { currency } from \"@/utils/currency\";\r\n\r\n\r\nexport default {\r\n  setup() {\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const store = useStore();\r\n    const isLoading = ref(false);\r\n    const req = ref({});\r\n    const id = route.params.id;\r\n    const status = ref(undefined)\r\n    const hasChanges = computed(()=> req.value.data.status !== status.value)\r\n\r\n    const remove = async () => {\r\n      await store.dispatch('request/removeById', route.params.id)\r\n      router.push('/')\r\n    }\r\n\r\n    const update = async () => {\r\n      const data = {...req.value.data,status: status.value, id: route.params.id}\r\n      await store.dispatch('request/updateById', data)\r\n      router.go()\r\n    }\r\n\r\n    onMounted(async () => {\r\n      isLoading.value = true;\r\n      req.value = await store.dispatch(\"request/loadById\", id);\r\n      status.value = req.value.data?.status;\r\n      isLoading.value = false;\r\n    });\r\n    return { isLoading, req, id, currency, remove, update, status, hasChanges };\r\n  },\r\n  components: {\r\n    \"app-page\": AppPage,\r\n    \"app-loader\": AppLoader,\r\n    \"app-status\": AppStatus,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./Request.vue?vue&type=template&id=66cc69cc\"\nimport script from \"./Request.vue?vue&type=script&lang=js\"\nexport * from \"./Request.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}